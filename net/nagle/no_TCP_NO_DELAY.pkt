--bind_port=8848

0 socket(AF_INET, SOCK_STREAM, 0) = 3
+0 setsockopt(3, SOL_SOCKET, SO_REUSEADDR, [1], 4) = 0
+0 bind(3, ..., ...) = 0
+0 listen(3, 128) = 0

// 显式禁止协议栈发出MSS整数倍的包
+0 `ethtool -K tun0 gro off gso off tso off`

// 这里限制了MSS大小
+.1 < S 0:0(0) win 1000 <mss 50>
+.0 > S. 0:0(0) ack 1 <...>
+.1 < . 1:1(0) ack 1 win 1000
+0 accept(3, ..., ...) = 4

// 由于限制了MSS大小，因此发包（105字节）是按照50，50，5拆分发出
+0 write(4, ..., 105) = 105
+0 write(4, ..., 58) = 58

// 握手后
// 20:03:32.241238 tun0  In  IP 192.0.2.1.45129 > 192.168.196.92.8848: Flags [.], ack 1, win 1000, length 0
//
// 从nagle的定义来看，MSS大小直接发
// 但是Linux实现下，余下的5字节并不需要等待ACK也能发出
// 看来nagle的ACK等待确认并不需要考虑大包
// 20:03:32.241460 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:03:32.241462 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [P.], seq 51:101, ack 1, win 64240, length 50
// 20:03:32.241466 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [P.], seq 101:106, ack 1, win 64240, length 5
//
// 第二个包
// 尽管窗口足够大，这里8字节无法发出，需要等待ACK
// 后续都是简单的重传
// 20:03:32.241495 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 106:156, ack 1, win 64240, length 50
// 20:03:32.559380 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:03:33.189324 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:03:34.439349 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:03:36.999340 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:03:42.039315 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:03:52.519427 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50
// 20:04:12.999343 tun0  Out IP 192.168.196.92.8848 > 192.0.2.1.45129: Flags [.], seq 1:51, ack 1, win 64240, length 50

+0 `sleep 1000000`
